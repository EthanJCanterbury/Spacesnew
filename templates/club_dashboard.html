
{% extends "base.html" %}

{% block content %}
<div class="club-dashboard-container">
    <!-- Sidebar Navigation -->
    <div class="club-sidebar">
        <div class="club-profile">
            <div class="profile-avatar">
                <i class="fas fa-users"></i>
            </div>
            <div class="profile-info">
                <h3>{% if club %}{{ club.name }}{% else %}Club Dashboard{% endif %}</h3>
                <span class="club-badge">{% if club and current_user.id == club.leader_id %}Club Leader{% elif club %}Member{% else %}No Club{% endif %}</span>
            </div>
        </div>

        <nav class="club-nav">
            <ul>
                <li>
                    <a href="#dashboard" class="nav-link active" data-section="dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="#stream" class="nav-link" data-section="stream">
                        <i class="fas fa-stream"></i>
                        <span>Stream</span>
                    </a>
                </li>
                <li>
                    <a href="#assignments" class="nav-link" data-section="assignments">
                        <i class="fas fa-tasks"></i>
                        <span>Assignments</span>
                    </a>
                </li>
                <li>
                    <a href="#members" class="nav-link" data-section="members">
                        <i class="fas fa-user-friends"></i>
                        <span>Members</span>
                    </a>
                </li>
                <li>
                    <a href="#projects" class="nav-link" data-section="projects">
                        <i class="fas fa-code"></i>
                        <span>Projects</span>
                    </a>
                </li>
                <li>
                    <a href="#chat" class="nav-link" data-section="chat">
                        <i class="fas fa-comments"></i>
                        <span>Chat</span>
                    </a>
                </li>
                <li>
                    <a href="#resources" class="nav-link" data-section="resources">
                        <i class="fas fa-link"></i>
                        <span>Resources</span>
                    </a>
                </li>
                <li>
                    <a href="#schedule" class="nav-link" data-section="schedule">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Schedule</span>
                    </a>
                </li>
                <li>
                    <a href="#rewards" class="nav-link" data-section="rewards">
                        <i class="fas fa-gift"></i>
                        <span>Rewards</span>
                    </a>
                </li>
                <li>
                    <a href="#settings" class="nav-link" data-section="settings">
                        <i class="fas fa-cogs"></i>
                        <span>Settings</span>
                    </a>
                </li>
            </ul>
        </nav>

        <div class="club-sidebar-footer">
            <div class="sidebar-collapse-btn" id="sidebarCollapseBtn">
                <i class="fas fa-chevron-left"></i>
            </div>
            <a href="/logout" class="logout-link">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </a>
        </div>
    </div>

    <!-- Main Content Area -->
    <div class="club-content">
        <!-- Horizontal Navbar -->
        <div class="horizontal-navbar">
            <div class="navbar-title">
                <h1><i class="fas fa-users"></i> {% if club %}{{ club.name }}{% else %}Club Dashboard{% endif %}</h1>
            </div>
            <div class="navbar-actions">
                {% if club %}
                <button class="btn-edit" onclick="openEditClubModal()">
                    <i class="fas fa-edit"></i> Edit Club
                </button>
                <button class="btn-join-code" onclick="generateJoinCode()">
                    <i class="fas fa-key"></i> Join Code: <span id="join-code-display">{{ club.join_code }}</span>
                </button>
                {% endif %}
            </div>
        </div>

        {% if not club %}
        <!-- Empty State -->
        <div class="club-empty-state">
            <div class="empty-icon">
                <i class="fas fa-users-slash"></i>
            </div>
            <h2>You haven't joined any clubs yet</h2>
            <p>Join an existing club with a join code or create your own!</p>
            <div class="empty-actions">
                <button class="btn-primary" onclick="openCreateClubModal()">
                    <i class="fas fa-plus"></i> Create Club
                </button>
                <button class="btn-secondary" onclick="openJoinClubModal()">
                    <i class="fas fa-sign-in-alt"></i> Join Club
                </button>
            </div>
        </div>

        {% elif current_user.club_memberships|length > 0 and not club %}
        <!-- Member View of Clubs -->
        <div class="my-clubs-section">
            <h2>My Clubs</h2>
            <div class="clubs-grid">
                {% for membership in current_user.club_memberships %}
                <div class="club-card" onclick="viewClub({{ membership.club.id }})">
                    <div class="club-card-header">
                        <h3>{{ membership.club.name }}</h3>
                        <span class="role-badge {% if membership.role == 'co-leader' %}role-badge-leader{% endif %}">
                            {{ membership.role|capitalize }}
                        </span>
                    </div>
                    <div class="club-card-body">
                        <p>{{ membership.club.description or 'No description available' }}</p>
                        <div class="club-meta">
                            <span><i class="fas fa-map-marker-alt"></i> {{ membership.club.location or 'No location' }}</span>
                            <span><i class="fas fa-user-friends"></i> {{ membership.club.members|length }} members</span>
                        </div>
                    </div>
                    <div class="club-card-footer">
                        <button class="btn-primary">View Club</button>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% else %}

        <!-- Dashboard Section -->
        <section id="dashboard" class="club-section active">
            <div class="section-header">
                <h2><i class="fas fa-tachometer-alt"></i> Dashboard</h2>
                <p>Overview of your club activities and statistics</p>
            </div>

            <div class="dashboard-stats">
                <div class="stat-card">
                    <div class="stat-icon user-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-info">
                        <h3>{{ club.members|length }}</h3>
                        <p>Club Members</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon site-icon">
                        <i class="fas fa-code"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="projectCount">0</h3>
                        <p>Total Projects</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon task-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="assignmentCount">0</h3>
                        <p>Active Assignments</p>
                    </div>
                </div>
            </div>

            <div class="dashboard-row">
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3><i class="fas fa-history"></i> Recent Activity</h3>
                    </div>
                    <div class="card-content">
                        <ul class="activity-list">
                            <li class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-user-plus"></i>
                                </div>
                                <div class="activity-details">
                                    <p>New member joined the club</p>
                                    <span class="activity-time">Just now</span>
                                </div>
                            </li>
                            <li class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-tasks"></i>
                                </div>
                                <div class="activity-details">
                                    <p>New assignment added: "Web Development Basics"</p>
                                    <span class="activity-time">2 hours ago</span>
                                </div>
                            </li>
                            <li class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-comment"></i>
                                </div>
                                <div class="activity-details">
                                    <p>New announcement posted in Stream</p>
                                    <span class="activity-time">Yesterday</span>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="dashboard-card">
                    <div class="card-header">
                        <h3><i class="fas fa-calendar"></i> Upcoming Meetings</h3>
                    </div>
                    <div class="card-content">
                        <div class="upcoming-meeting">
                            <div class="meeting-date">
                                <span class="date-num">24</span>
                                <span class="date-month">Apr</span>
                            </div>
                            <div class="meeting-details">
                                <h4>Weekly Club Meeting</h4>
                                <p><i class="fas fa-clock"></i> 4:00 PM - 5:30 PM</p>
                                <p><i class="fas fa-map-marker-alt"></i> Room 203</p>
                            </div>
                        </div>
                        <div class="upcoming-meeting">
                            <div class="meeting-date">
                                <span class="date-num">28</span>
                                <span class="date-month">Apr</span>
                            </div>
                            <div class="meeting-details">
                                <h4>Workshop: Intro to React</h4>
                                <p><i class="fas fa-clock"></i> 3:30 PM - 5:00 PM</p>
                                <p><i class="fas fa-map-marker-alt"></i> Computer Lab</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dashboard-row single-col">
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3><i class="fas fa-clipboard-list"></i> Active Assignments</h3>
                        <a href="#assignments" class="card-link" onclick="openTab('assignments')">View All</a>
                    </div>
                    <div class="card-content">
                        <div class="assignment-item">
                            <div class="assignment-status">
                                <span class="status-badge status-active">Active</span>
                            </div>
                            <div class="assignment-details">
                                <h4>Build a Personal Portfolio</h4>
                                <p>Create a responsive personal portfolio webpage showcasing your projects and skills.</p>
                                <div class="assignment-meta">
                                    <span><i class="fas fa-calendar-alt"></i> Due: Apr 30, 2025</span>
                                </div>
                            </div>
                        </div>
                        <div class="assignment-item">
                            <div class="assignment-status">
                                <span class="status-badge status-active">Active</span>
                            </div>
                            <div class="assignment-details">
                                <h4>JavaScript Basics Quiz</h4>
                                <p>Complete the online quiz covering JavaScript fundamentals.</p>
                                <div class="assignment-meta">
                                    <span><i class="fas fa-calendar-alt"></i> Due: May 5, 2025</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Stream Tab Content -->
        <section id="stream" class="club-section">
            <div class="section-header">
                <h2><i class="fas fa-stream"></i> Stream</h2>
                <p>Announcements and updates for club members</p>
            </div>

            <div class="stream-container">
                <div class="post-composer">
                    <div class="composer-header">
                        <h3><i class="fas fa-pen"></i> Create Announcement</h3>
                    </div>
                    <div class="composer-body">
                        <textarea id="post-content" placeholder="Share an announcement with your club..."></textarea>
                        <div class="composer-actions">
                            <button onclick="createPost()" class="btn-primary"><i class="fas fa-paper-plane"></i> Post</button>
                        </div>
                    </div>
                </div>

                <div class="posts-list">
                    <div class="post-card">
                        <div class="post-header">
                            <img src="{{ url_for('static', filename='images/logo-rounded.png') }}" alt="Profile" class="avatar">
                            <div class="post-info">
                                <h3>Club Leader</h3>
                                <span class="post-date">Just now</span>
                            </div>
                            <div class="post-actions">
                                <button class="btn-icon"><i class="fas fa-ellipsis-v"></i></button>
                            </div>
                        </div>
                        <div class="post-content">
                            <p>Welcome to our club! This is a sample announcement. Real announcements will appear here once you create them.</p>
                        </div>
                        <div class="post-footer">
                            <button class="post-action"><i class="far fa-heart"></i> Like</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Assignments Tab Content -->
        <section id="assignments" class="club-section">
            <div class="section-header">
                <h2><i class="fas fa-tasks"></i> Assignments</h2>
                <p>View and manage assignments for club members</p>
            </div>

            <div class="assignments-container">
                <div class="assignments-header">
                    <h3>Club Assignments</h3>
                    <button class="btn-primary" onclick="openCreateAssignmentModal()">
                        <i class="fas fa-plus"></i> New Assignment
                    </button>
                </div>

                <div class="assignment-cards">
                    <div class="assignment-card">
                        <div class="assignment-status">
                            <span class="status-badge status-active">Active</span>
                        </div>
                        <div class="assignment-body">
                            <h3>Sample Assignment</h3>
                            <p>This is a sample assignment to demonstrate how assignments will look in your club dashboard.</p>
                            <div class="assignment-meta">
                                <span><i class="fas fa-calendar-alt"></i> Due: Next week</span>
                                <span><i class="fas fa-users"></i> For: All members</span>
                            </div>
                        </div>
                        <div class="assignment-actions">
                            <button class="btn-primary btn-sm"><i class="fas fa-eye"></i> View</button>
                            <button class="btn-secondary btn-sm"><i class="fas fa-edit"></i> Edit</button>
                            <button class="btn-danger btn-sm"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Members Tab Content -->
        <section id="members" class="club-section">
            <div class="section-header">
                <h2><i class="fas fa-user-friends"></i> Members</h2>
                <p>Manage club members and their roles</p>
            </div>

            <div class="members-container">
                <div class="members-header">
                    <h3>Club Members</h3>
                    <button class="btn-primary" onclick="openAddMemberModal()">
                        <i class="fas fa-user-plus"></i> Add Member
                    </button>
                </div>

                <div class="members-table-container">
                    <table class="members-table">
                        <thead>
                            <tr>
                                <th>Username</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Joined</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for membership in club.members %}
                                <tr>
                                    <td>{{ membership.user.username }}</td>
                                    <td>{{ membership.user.email }}</td>
                                    <td>
                                        <span class="role-badge {% if membership.role == 'co-leader' %}role-badge-leader{% endif %}">
                                            {{ membership.role|capitalize }}
                                        </span>
                                    </td>
                                    <td>{{ membership.joined_at.strftime('%Y-%m-%d') }}</td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-icon" onclick="openChangeRoleModal({{ membership.id }}, '{{ membership.user.username }}', '{{ membership.role }}')">
                                                <i class="fas fa-user-tag"></i>
                                            </button>
                                            <button class="btn-icon delete-action" onclick="openRemoveMemberModal({{ membership.id }}, '{{ membership.user.username }}')">
                                                <i class="fas fa-user-minus"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Projects Tab Content -->
        <section id="projects" class="club-section">
            <div class="section-header">
                <h2><i class="fas fa-code"></i> Projects</h2>
                <p>Browse and showcase member projects</p>
            </div>

            <div class="projects-container">
                <div class="projects-header">
                    <h3>Club Member Projects</h3>
                    <div class="projects-actions">
                        <button class="btn-secondary btn-sm" id="toggle-featured">
                            <i class="fas fa-star"></i> Show Featured Only
                        </button>
                        <div class="search-box">
                            <input type="text" id="project-search" placeholder="Search projects...">
                            <i class="fas fa-search"></i>
                        </div>
                    </div>
                </div>

                <div class="projects-grid" id="projects-container">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        <p>Loading member projects...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Chat Tab Content -->
        <section id="chat" class="club-section">
            <div class="section-header">
                <h2><i class="fas fa-comments"></i> Chat</h2>
                <p>Communicate with club members in real-time</p>
            </div>

            <div class="chat-container">
                <div class="chat-sidebar">
                    <div class="chat-channels">
                        <h3>Channels</h3>
                        <ul class="channels-list">
                            <li class="active"><i class="fas fa-hashtag"></i> general</li>
                            <li><i class="fas fa-hashtag"></i> announcements</li>
                            <li><i class="fas fa-hashtag"></i> help</li>
                        </ul>
                        <button class="btn-secondary btn-sm" onclick="openCreateChannelModal()">
                            <i class="fas fa-plus"></i> New Channel
                        </button>
                    </div>
                </div>

                <div class="chat-main">
                    <div class="chat-header">
                        <h3><i class="fas fa-hashtag"></i> general</h3>
                    </div>

                    <div class="chat-messages">
                        <div class="chat-message">
                            <img src="{{ url_for('static', filename='images/logo-rounded.png') }}" alt="Profile" class="avatar">
                            <div class="message-content">
                                <div class="message-header">
                                    <span class="message-sender">Club Bot</span>
                                    <span class="message-time">Just now</span>
                                </div>
                                <p>Welcome to the club chat! This is where you and your members can communicate in real-time.</p>
                            </div>
                        </div>
                    </div>

                    <div class="chat-input">
                        <textarea placeholder="Message #general" id="chat-message-input"></textarea>
                        <button class="send-button" onclick="sendChatMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Resources Tab Content -->
        <section id="resources" class="club-section">
            <div class="section-header">
                <h2><i class="fas fa-link"></i> Resources</h2>
                <p>Useful links and resources for club members</p>
            </div>

            <div class="resources-container">
                <div class="resources-header">
                    <h3>Quick Links & Resources</h3>
                    <button class="btn-primary" onclick="openAddResourceModal()">
                        <i class="fas fa-plus"></i> Add Resource
                    </button>
                </div>

                <div class="resources-grid">
                    <div class="resource-card">
                        <div class="resource-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="resource-content">
                            <h3>Sample Resource</h3>
                            <p>This is an example resource that shows how your links will appear.</p>
                        </div>
                        <div class="resource-actions">
                            <a href="#" class="btn-primary btn-sm">Visit</a>
                            <button class="btn-icon"><i class="fas fa-ellipsis-v"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Schedule Tab Content -->
        <section id="schedule" class="club-section">
            <div class="section-header">
                <h2><i class="fas fa-calendar-alt"></i> Schedule</h2>
                <p>View and manage club meetings and events</p>
            </div>

            <div class="schedule-container">
                <div class="schedule-header">
                    <h3>Club Meeting Schedule</h3>
                    <button class="btn-primary" onclick="openCreateMeetingModal()">
                        <i class="fas fa-plus"></i> New Meeting
                    </button>
                </div>

                <div class="calendar-view">
                    <div class="calendar-nav">
                        <button class="btn-icon" id="prevMonth">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h3 id="currentMonth">April 2025</h3>
                        <button class="btn-icon" id="nextMonth">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>

                    <div class="calendar">
                        <div class="calendar-header">
                            <div>Sun</div>
                            <div>Mon</div>
                            <div>Tue</div>
                            <div>Wed</div>
                            <div>Thu</div>
                            <div>Fri</div>
                            <div>Sat</div>
                        </div>
                        <div class="calendar-body" id="calendar-body">
                            <!-- Calendar will be filled dynamically with JS -->
                        </div>
                    </div>
                </div>

                <div class="meetings-list">
                    <h4>Upcoming Meetings</h4>
                    <div id="upcoming-meetings">
                        <div class="upcoming-meeting">
                            <div class="meeting-date">
                                <span class="date-num">24</span>
                                <span class="date-month">Apr</span>
                            </div>
                            <div class="meeting-details">
                                <h4>Weekly Club Meeting</h4>
                                <p><i class="fas fa-clock"></i> 4:00 PM - 5:30 PM</p>
                                <p><i class="fas fa-map-marker-alt"></i> Room 203</p>
                            </div>
                            <div class="meeting-actions">
                                <button class="btn-icon"><i class="fas fa-edit"></i></button>
                                <button class="btn-icon"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Rewards Tab Content -->
        <section id="rewards" class="club-section">
            <div class="section-header">
                <h2><i class="fas fa-gift"></i> Rewards</h2>
                <p>Claim rewards for club activities and achievements</p>
            </div>

            <div class="rewards-container">
                <div class="rewards-header">
                    <h3>Hack Club Workshops & YSWSs </h3>
                    <p>Complete projects and workshops to earn awesome rewards!</p>
                </div>

                <div class="rewards-grid">
                    <div class="reward-card">
                        <div class="reward-icon">
                            <i class="fas fa-pizza-slice"></i>
                        </div>
                        <div class="reward-content">
                            <h3>$5 for Pizza</h3>
                            <p>Ship any project and get $5 for pizza to celebrate!</p>
                            <div class="reward-meta">
                                <span><i class="fas fa-users"></i> For all club members</span>
                            </div>
                        </div>
                        <div class="reward-actions">
                            <a href="https://airtable.com/appSUAc40CDu6bDAp/pagvu2xGhfsMC8AOL/form" target="_blank" class="btn-primary">
                                Log Project
                            </a>
                        </div>
                    </div>

                    <div class="reward-card">
                        <div class="reward-icon">
                            <i class="fas fa-mug-hot"></i>
                        </div>
                        <div class="reward-content">
                            <h3>Boba Workshop</h3>
                            <p>Build a website and get boba drinks for your club meeting!</p>
                            <div class="reward-meta">
                                <span><i class="fas fa-users"></i> For club workshop</span>
                            </div>
                        </div>
                        <div class="reward-actions">
                            <a href="https://forms.hackclub.com/t/5r7VGppu9wus" target="_blank" class="btn-primary">
                                Run Workshop
                            </a>
                        </div>
                    </div>

                    <div class="reward-card">
                        <div class="reward-icon">
                            <i class="fas fa-ice-cream"></i>
                        </div>
                        <div class="reward-content">
                            <h3>Swirl Workshop</h3>
                            <p>Make a website together and get ice cream for your club!</p>
                            <div class="reward-meta">
                                <span><i class="fas fa-users"></i> For club workshop</span>
                            </div>
                        </div>
                        <div class="reward-actions">
                            <a href="https://forms.hackclub.com/t/8JgE9XsQanus" target="_blank" class="btn-primary">
                                Run Workshop
                            </a>
                        </div>
                    </div>
                </div>

                <div class="rewards-guide">
                    <h4>How to claim rewards:</h4>
                    <ol>
                        <li>Complete the required project or workshop with your club</li>
                        <li>Click the corresponding "Claim Reward" or "Run Workshop" button</li>
                        <li>Fill out the form with your project details</li>
                        <li>Wait for Hack Club to process your request</li>
                    </ol>
                    <div class="info-box">
                        <i class="fas fa-info-circle"></i>
                        <p>All rewards are provided by Hack Club and subject to their terms and availability.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Settings Tab Content -->
        <section id="settings" class="club-section">
            <div class="section-header">
                <h2><i class="fas fa-cogs"></i> Settings</h2>
                <p>Configure club settings and preferences</p>
            </div>

            <div class="settings-container">
                <h3>Club Settings</h3>

                <div class="settings-card">
                    <div class="settings-section">
                        <h4>General Information</h4>
                        <form id="editClubForm">
                            <div class="form-group">
                                <label for="editClubName">Club Name</label>
                                <input type="text" id="editClubName" name="editClubName" value="{{ club.name }}" class="form-input">
                            </div>
                            <div class="form-group">
                                <label for="editClubLocation">Location</label>
                                <input type="text" id="editClubLocation" name="editClubLocation" value="{{ club.location }}" class="form-input">
                            </div>
                            <div class="form-group">
                                <label for="editClubDescription">Description</label>
                                <textarea id="editClubDescription" name="editClubDescription" rows="4" class="form-textarea">{{ club.description }}</textarea>
                            </div>
                            <button type="button" onclick="updateClub()" class="btn-primary">
                                <i class="fas fa-save"></i> Save Changes
                            </button>
                        </form>
                    </div>

                    <div class="settings-section danger-zone">
                        <h4>Danger Zone</h4>
                        <p>Deleting a club is permanent and will remove all members, posts, and assignments.</p>
                        <button class="btn-danger" onclick="openDeleteClubModal()">
                            <i class="fas fa-trash"></i> Delete Club
                        </button>
                    </div>
                </div>
            </div>
        </section>
        {% endif %}
    </div>
</div>

<!-- Modals -->
<!-- Create Club Modal -->
<div id="createClubModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-users"></i> Create New Club</h2>
            <button class="close-btn" onclick="closeCreateClubModal()">&times;</button>
        </div>
        <div class="modal-body">
            <form id="createClubForm">
                <div class="form-group">
                    <label for="clubName">Club Name <span class="required">*</span></label>
                    <input type="text" id="clubName" name="clubName" required placeholder="E.g., Hack Club Central High" class="form-input">
                </div>
                <div class="form-group">
                    <label for="clubLocation">Location</label>
                    <input type="text" id="clubLocation" name="clubLocation" placeholder="E.g., Room 203, Central High School" class="form-input">
                </div>

                <div class="form-group">
                    <label for="clubDescription">Description</label>
                    <textarea id="clubDescription" name="clubDescription" rows="4" placeholder="Tell us about your club..." class="form-textarea"></textarea>
                </div>
            </form>
        </div>
        <div class="modal-actions">
            <button class="btn-secondary" onclick="closeCreateClubModal()">Cancel</button>
            <button class="btn-primary" onclick="createClub()">
                <i class="fas fa-plus"></i> Create Club
            </button>
        </div>
    </div>
</div>

<!-- Join Club Modal -->
<div id="joinClubModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-sign-in-alt"></i> Join a Club</h2>
            <button class="close-btn" onclick="closeJoinClubModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="joinCode">Club Join Code <span class="required">*</span></label>
                <input type="text" id="joinCode" name="joinCode" required placeholder="Enter the join code provided by your club leader" class="form-input">
            </div>
            <div class="info-box">
                <i class="fas fa-info-circle"></i>
                <p>By joining a club, you grant club leaders access to view and manage your spaces.</p>
            </div>
        </div>
        <div class="modal-actions">
            <button class="btn-secondary" onclick="closeJoinClubModal()">Cancel</button>
            <button class="btn-primary" onclick="joinClub()">
                <i class="fas fa-sign-in-alt"></i> Join Club
            </button>
        </div>
    </div>
</div>

<!-- Edit Club Modal -->
<div id="editClubModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-edit"></i> Edit Club</h2>
            <button class="close-btn" onclick="closeEditClubModal()">&times;</button>
        </div>
        <div class="modal-body">
            <form id="modalEditClubForm">
                <div class="form-group">
                    <label for="modalEditClubName">Club Name <span class="required">*</span></label>
                    <input type="text" id="modalEditClubName" name="modalEditClubName" required class="form-input">
                </div>
                <div class="form-group">
                    <label for="modalEditClubLocation">Location</label>
                    <input type="text" id="modalEditClubLocation" name="modalEditClubLocation" class="form-input">
                </div>
                <div class="form-group">
                    <label for="modalEditClubDescription">Description</label>
                    <textarea id="modalEditClubDescription" name="modalEditClubDescription" rows="4" class="form-textarea"></textarea>
                </div>
            </form>
        </div>
        <div class="modal-actions">
            <button class="btn-secondary" onclick="closeEditClubModal()">Cancel</button>
            <button class="btn-primary" onclick="updateClubFromModal()">
                <i class="fas fa-save"></i> Save Changes
            </button>
        </div>
    </div>
</div>

<!-- Add Member Modal -->
<div id="addMemberModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-user-plus"></i> Add Member</h2>
            <button class="close-btn" onclick="closeAddMemberModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="join-code-info">
                <div class="info-card">
                    <h3><i class="fas fa-key"></i> Join Code</h3>
                    <p>Share your club's join code with members and let them join on their own.</p>
                    <div class="join-code-display">
                        {% if club and club.join_code %}
                            <div class="code-box">{{ club.join_code }}</div>
                            <button class="btn-primary" onclick="copyJoinCode()">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        {% else %}
                            <button class="btn-primary" onclick="generateJoinCode()">
                                <i class="fas fa-key"></i> Generate Join Code
                            </button>
                        {% endif %}
                    </div>
                    <p><small>Members can join by entering this code on their dashboard.</small></p>
                </div>
            </div>
        </div>
        <div class="modal-actions">
            <button class="btn-secondary" onclick="closeAddMemberModal()">Close</button>
        </div>
    </div>
</div>

<!-- Change Role Modal -->
<div id="changeRoleModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-user-tag"></i> Change Member Role</h2>
            <button class="close-btn" onclick="closeChangeRoleModal()">&times;</button>
        </div>
        <div class="modal-body">
            <p>Change role for <span id="roleUsername" class="highlighted-text"></span>:</p>
            <input type="hidden" id="membershipIdForRole">
            <div class="role-selector">
                <label class="role-option">
                    <input type="radio" name="memberRole" value="member" id="roleMember">
                    <span class="role-card">
                        <i class="fas fa-user"></i>
                        <span>Member</span>
                        <span class="role-description">Regular club member with basic privileges</span>
                    </span>
                </label>
                <label class="role-option">
                    <input type="radio" name="memberRole" value="co-leader" id="roleLeader">
                    <span class="role-card">
                        <i class="fas fa-crown"></i>
                        <span>Co-Leader</span>
                        <span class="role-description">Can manage members and club settings</span>
                    </span>
                </label>
            </div>
        </div>
        <div class="modal-actions">
            <button class="btn-secondary" onclick="closeChangeRoleModal()">Cancel</button>
            <button class="btn-primary" onclick="changeRole()">
                <i class="fas fa-save"></i> Save Changes
            </button>
        </div>
    </div>
</div>

<!-- Create Assignment Modal -->
<div id="createAssignmentModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-tasks"></i> Create Assignment</h2>
            <button class="close-btn" onclick="closeCreateAssignmentModal()">&times;</button>
        </div>
        <div class="modal-body">
            <form id="createAssignmentForm">
                <div class="form-group">
                    <label for="assignmentTitle">Title <span class="required">*</span></label>
                    <input type="text" id="assignmentTitle" required class="form-input">
                </div>
                <div class="form-group">
                    <label for="assignmentDescription">Description <span class="required">*</span></label>
                    <textarea id="assignmentDescription" rows="4" required class="form-textarea"></textarea>
                </div>
                <div class="form-group">
                    <label for="assignmentDueDate">Due Date</label>
                    <input type="date" id="assignmentDueDate" class="form-input">
                </div>
                <div class="form-group">
                    <label>Assignment For:</label>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="assignAllMembers" checked> All Members
                        </label>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-actions">
            <button class="btn-secondary" onclick="closeCreateAssignmentModal()">Cancel</button>
            <button class="btn-primary" onclick="createAssignment()">
                <i class="fas fa-plus"></i> Create Assignment
            </button>
        </div>
    </div>
</div>

<!-- Add Resource Modal -->
<div id="addResourceModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-link"></i> Add Resource</h2>
            <button class="close-btn" onclick="closeAddResourceModal()">&times;</button>
        </div>
        <div class="modal-body">
            <form id="addResourceForm">
                <div class="form-group">
                    <label for="resourceTitle">Title <span class="required">*</span></label>
                    <input type="text" id="resourceTitle" required class="form-input">
                </div>
                <div class="form-group">
                    <label for="resourceUrl">URL <span class="required">*</span></label>
                    <input type="url" id="resourceUrl" required class="form-input">
                </div>
                <div class="form-group">
                    <label for="resourceDescription">Description</label>
                    <textarea id="resourceDescription" rows="3" class="form-textarea"></textarea>
                </div>
                <div class="form-group">
                    <label for="resourceIcon">Icon</label>
                    <select id="resourceIcon" class="form-input">
                        <option value="book">Book</option>
                        <option value="link">Link</option>
                        <option value="file">File</option>
                        <option value="video">Video</option>
                        <option value="code">Code</option>
                    </select>
                </div>
            </form>
        </div>
        <div class="modal-actions">
            <button class="btn-secondary" onclick="closeAddResourceModal()">Cancel</button>
            <button class="btn-primary" onclick="addResource()">
                <i class="fas fa-plus"></i> Add Resource
            </button>
        </div>
    </div>
</div>

<!-- Create Channel Modal -->
<div id="createChannelModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-hashtag"></i> Create Channel</h2>
            <button class="close-btn" onclick="closeCreateChannelModal()">&times;</button>
        </div>
        <div class="modal-body">
            <form id="createChannelForm">
                <div class="form-group">
                    <label for="channelName">Channel Name <span class="required">*</span></label>
                    <input type="text" id="channelName" required placeholder="e.g. homework-help" class="form-input">
                </div>
                <div class="form-group">
                    <label for="channelDescription">Description</label>
                    <textarea id="channelDescription" placeholder="What's this channel about?" rows="3" class="form-textarea"></textarea>
                </div>
            </form>
        </div>
        <div class="modal-actions">
            <button class="btn-secondary" onclick="closeCreateChannelModal()">Cancel</button>
            <button class="btn-primary" onclick="createChannel()">
                <i class="fas fa-plus"></i> Create Channel
            </button>
        </div>
    </div>
</div>

<!-- Create Meeting Modal -->
<div id="createMeetingModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-calendar-plus"></i> Schedule Meeting</h2>
            <button class="close-btn" onclick="closeCreateMeetingModal()">&times;</button>
        </div>
        <div class="modal-body">
            <form id="createMeetingForm">
                <div class="form-group">
                    <label for="meetingTitle">Meeting Title <span class="required">*</span></label>
                    <input type="text" id="meetingTitle" required placeholder="e.g. Weekly Check-in" class="form-input">
                </div>
                <div class="form-group">
                    <label for="meetingDescription">Description</label>
                    <textarea id="meetingDescription" placeholder="What's this meeting about?" rows="3" class="form-textarea"></textarea>
                </div>
                <div class="form-group">
                    <label for="meetingDate">Date <span class="required">*</span></label>
                    <input type="date" id="meetingDate" required class="form-input">
                </div>
                <div class="form-row">
                    <div class="form-group half">
                        <label for="startTime">Start Time <span class="required">*</span></label>
                        <input type="time" id="startTime" required class="form-input">
                    </div>
                    <div class="form-group half">
                        <label for="endTime">End Time</label>
                        <input type="time" id="endTime" class="form-input">
                    </div>
                </div>
                <div class="form-group">
                    <label for="meetingLocation">Location</label>
                    <input type="text" id="meetingLocation" placeholder="e.g. Room 203 or Virtual" class="form-input">
                </div>
                <div class="form-group">
                    <label for="meetingLink">Meeting Link</label>
                    <input type="url" id="meetingLink" placeholder="e.g. Zoom or Google Meet URL" class="form-input">
                </div>
            </form>
        </div>
        <div class="modal-actions">
            <button class="btn-secondary" onclick="closeCreateMeetingModal()">Cancel</button>
            <button class="btn-primary" onclick="createMeeting()">
                <i class="fas fa-plus"></i> Schedule Meeting
            </button>
        </div>
    </div>
</div>

<!-- Toast container for notifications -->
<div id="toast-container"></div>

<style>
:root {
    --primary-rgb: 237, 55, 80;
    --primary: #ec3750;
    --primary-dark: #cf142b;
    --primary-light: #ff5a69;
    --secondary: #e83e8c;
    --success: #059669;
    --warning: #d97706;
    --danger: #dc2626;
    --light: #f3f4f6;
    --dark: #1f2937;
    --text-primary: #111827;
    --text-secondary: #4b5563;
    --text-muted: #6b7280;
    --border-color: #e5e7eb;
    --card-bg: #ffffff;
    --body-bg: #f9fafb;
    --gradient-start: #ec3750;
    --gradient-end: #ff8c38;
}

/* ===== Club Dashboard Styles ===== */
.club-dashboard-container {
    display: flex;
    min-height: 100vh;
    background-color: var(--body-bg);
    color: var(--text-primary);
    transition: all 0.3s ease;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
}

/* Sidebar Styles */
.club-sidebar {
    width: 260px;
    background-color: var(--card-bg);
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    z-index: 100;
    transition: all 0.3s ease;
}

.club-profile {
    padding: 1.5rem;
    display: flex;
    align-items: center;
    border-bottom: 1px solid var(--border-color);
    margin-top: 60px;
}

.profile-avatar {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 1rem;
}

.profile-avatar i {
    font-size: 24px;
    color: white;
}

.profile-info h3 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
}

.club-badge {
    background-color: var(--primary);
    color: white;
    padding: 3px 8px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 500;
    display: inline-block;
    margin-top: 5px;
}

.club-nav {
    flex: 1;
    padding: 1.5rem 0;
    overflow-y: auto;
}

.club-nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.club-nav li {
    margin-bottom: 5px;
}

.club-nav .nav-link {
    display: flex;
    align-items: center;
    padding: 12px 1.5rem;
    color: var(--text-secondary);
    text-decoration: none;
    transition: all 0.2s ease;
    border-left: 3px solid transparent;
}

.club-nav .nav-link i {
    font-size: 18px;
    margin-right: 12px;
    width: 24px;
    text-align: center;
}

.club-nav .nav-link:hover {
    background-color: rgba(255, 255, 255, 0.05);
    color: var(--text-primary);
}

.club-nav .nav-link.active {
    background-color: rgba(var(--primary-rgb), 0.1);
    color: var(--primary);
    border-left-color: var(--primary);
}

.club-sidebar-footer {
    padding: 1rem 1.5rem;
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
}

.sidebar-collapse-btn {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background-color: rgba(var(--primary-rgb), 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
}

.sidebar-collapse-btn:hover {
    background-color: rgba(var(--primary-rgb), 0.2);
}

.logout-link {
    color: var(--text-secondary);
    text-decoration: none;
    display: flex;
    align-items: center;
}

.logout-link i {
    margin-right: 8px;
}

.logout-link:hover {
    color: var(--danger);
}

/* Content Area */
.club-content {
    flex: 1;
    padding: 1.5rem 2rem;
    margin-left: 260px;
    transition: all 0.3s ease;
}

/* Horizontal Navbar */
.horizontal-navbar {
    margin-bottom: 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 0;
    margin-top: 60px;
    border-bottom: 1px solid var(--border-color);
}

.navbar-title h1 {
    font-size: 1.75rem;
    font-weight: 700;
    margin: 0;
    color: var(--text-primary);
    display: flex;
    align-items: center;
}

.navbar-title h1 i {
    margin-right: 0.75rem;
    color: var(--primary);
}

.navbar-actions {
    display: flex;
    gap: 10px;
}

.btn-edit, .btn-join-code {
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 8px;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-edit {
    background-color: var(--primary);
    color: white;
}

.btn-edit:hover {
    background-color: var(--primary-dark);
}

.btn-join-code {
    background-color: var(--light);
    color: var(--text-primary);
}

.btn-join-code:hover {
    background-color: var(--border-color);
}

/* Button Styles */
.btn-primary {
    background-color: var(--primary);
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: all 0.2s ease;
}

.btn-primary i {
    font-size: 14px;
}

.btn-primary:hover {
    background-color: var(--primary-dark);
}

.btn-secondary {
    background-color: var(--light);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
    padding: 0.5rem 1rem;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: all 0.2s ease;
}

.btn-secondary i {
    font-size: 14px;
}

.btn-secondary:hover {
    background-color: var(--border-color);
}

.btn-danger {
    background-color: var(--danger);
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: all 0.2s ease;
}

.btn-danger i {
    font-size: 14px;
}

.btn-danger:hover {
    background-color: #b91c1c;
}

.btn-sm {
    padding: 0.35rem 0.7rem;
    font-size: 12px;
}

.btn-icon {
    width: 32px;
    height: 32px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background-color: var(--light);
    color: var(--text-primary);
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-icon:hover {
    background-color: var(--border-color);
}

/* Section Styles */
.club-section {
    background-color: var(--card-bg);
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 2rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    display: none;
    animation: fadeIn 0.3s ease;
}

.club-section.active {
    display: block;
}

.section-header {
    margin-bottom: 1.5rem;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 1rem;
}

.section-header h2 {
    font-size: 1.5rem;
    font-weight: 600;
    margin: 0 0 0.5rem;
    display: flex;
    align-items: center;
}

.section-header h2 i {
    margin-right: 0.75rem;
    color: var(--primary);
}

.section-header p {
    color: var(--text-secondary);
    margin: 0;
}

/* Dashboard Stats */
.dashboard-stats {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.stat-card {
    background-color: var(--card-bg);
    border-radius: 12px;
    padding: 1.25rem;
    display: flex;
    align-items: center;
    flex: 1;
    min-width: 200px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    border: 1px solid var(--border-color);
}

.stat-icon {
    width: 50px;
    height: 50px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 1rem;
}

.stat-icon i {
    font-size: 22px;
    color: white;
}

.user-icon {
    background: linear-gradient(135deg, #3498db, #2980b9);
}

.site-icon {
    background: linear-gradient(135deg, #2ecc71, #27ae60);
}

.task-icon {
    background: linear-gradient(135deg, #9b59b6, #8e44ad);
}

.stat-info h3 {
    font-size: 1.5rem;
    font-weight: 700;
    margin: 0 0 5px;
}

.stat-info p {
    margin: 0;
    color: var(--text-secondary);
    font-size: 0.9rem;
}

/* Dashboard Cards */
.dashboard-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.dashboard-row.single-col {
    grid-template-columns: 1fr;
}

.dashboard-card {
    background-color: var(--card-bg);
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    border: 1px solid var(--border-color);
}

.card-header {
    padding: 1rem 1.25rem;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.card-header h3 {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
    display: flex;
    align-items: center;
}

.card-header h3 i {
    margin-right: 0.75rem;
    color: var(--primary);
}

.card-link {
    color: var(--primary);
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 500;
}

.card-link:hover {
    text-decoration: underline;
}

.card-content {
    padding: 1.25rem;
}

/* Activity List */
.activity-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.activity-item {
    display: flex;
    align-items: flex-start;
    padding: 0.75rem 0;
    border-bottom: 1px solid var(--border-color);
}

.activity-item:last-child {
    border-bottom: none;
    padding-bottom: 0;
}

.activity-icon {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background-color: rgba(var(--primary-rgb), 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 1rem;
    flex-shrink: 0;
}

.activity-icon i {
    color: var(--primary);
    font-size: 16px;
}

.activity-details p {
    margin: 0 0 5px;
    font-weight: 500;
}

.activity-time {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

/* Upcoming Events */
.upcoming-meeting {
    display: flex;
    align-items: flex-start;
    padding: 0.75rem 0;
    border-bottom: 1px solid var(--border-color);
}

.upcoming-meeting:last-child {
    border-bottom: none;
    padding-bottom: 0;
}

.meeting-date {
    width: 50px;
    height: 50px;
    background-color: var(--primary);
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    margin-right: 1rem;
    color: white;
    flex-shrink: 0;
}

.date-num {
    font-size: 1.25rem;
    font-weight: 700;
    line-height: 1;
}

.date-month {
    font-size: 0.75rem;
    font-weight: 500;
}

.meeting-details {
    flex: 1;
}

.meeting-details h4 {
    margin: 0 0 0.5rem;
    font-size: 1rem;
}

.meeting-details p {
    margin: 0 0 0.25rem;
    font-size: 0.9rem;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
}

.meeting-details p i {
    margin-right: 0.5rem;
    width: 16px;
}

.meeting-actions {
    display: flex;
    gap: 5px;
    flex-shrink: 0;
}

/* Assignment Items */
.assignment-item {
    display: flex;
    align-items: flex-start;
    padding: 0.75rem 0;
    border-bottom: 1px solid var(--border-color);
}

.assignment-item:last-child {
    border-bottom: none;
    padding-bottom: 0;
}

.assignment-status {
    margin-right: 1rem;
    flex-shrink: 0;
}

.status-badge {
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 500;
    display: inline-block;
}

.status-badge.status-active {
    background-color: rgba(46, 204, 113, 0.15);
    color: #2ecc71;
}

.assignment-details {
    flex: 1;
}

.assignment-details h4 {
    margin: 0 0 0.5rem;
    font-size: 1rem;
}

.assignment-details p {
    margin: 0 0 0.5rem;
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.assignment-meta {
    font-size: 0.85rem;
    color: var(--text-muted);
}

.assignment-meta span {
    display: inline-flex;
    align-items: center;
    margin-right: 1rem;
}

.assignment-meta span i {
    margin-right: 0.5rem;
}

/* Stream Section */
.stream-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.post-composer {
    background-color: var(--card-bg);
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    border: 1px solid var(--border-color);
}

.composer-header {
    padding: 1rem;
    border-bottom: 1px solid var(--border-color);
}

.composer-header h3 {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
    display: flex;
    align-items: center;
}

.composer-header h3 i {
    margin-right: 0.75rem;
    color: var(--primary);
}

.composer-body {
    padding: 1rem;
}

.composer-body textarea {
    width: 100%;
    min-height: 100px;
    padding: 0.75rem;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    resize: vertical;
    margin-bottom: 1rem;
}

.composer-actions {
    display: flex;
    justify-content: flex-end;
}

.post-card {
    background-color: var(--card-bg);
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    border: 1px solid var(--border-color);
}

.post-header {
    padding: 1rem;
    display: flex;
    align-items: center;
    border-bottom: 1px solid var(--border-color);
}

.post-header .avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 1rem;
}

.post-info {
    flex: 1;
}

.post-info h3 {
    margin: 0 0 0.25rem;
    font-size: 1rem;
    font-weight: 600;
}

.post-date {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.post-content {
    padding: 1rem;
}

.post-content p {
    margin: 0;
    line-height: 1.5;
}

.post-footer {
    padding: 0.5rem 1rem;
    border-top: 1px solid var(--border-color);
    display: flex;
}

.post-action {
    background: none;
    border: none;
    color: var(--text-secondary);
    padding: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
    transition: color 0.2s ease;
}

.post-action:hover {
    color: var(--primary);
}

/* Assignments Section */
.assignments-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.assignments-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.assignments-header h3 {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 600;
}

.assignment-cards {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1rem;
}

.assignment-card {
    background-color: var(--card-bg);
    border-radius: 12px;
    padding: 1.25rem;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    border: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
}

.assignment-body {
    flex: 1;
    margin: 1rem 0;
}

.assignment-body h3 {
    margin: 0 0 0.5rem;
    font-size: 1.1rem;
    font-weight: 600;
}

.assignment-body p {
    margin: 0 0 1rem;
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.assignment-actions {
    display: flex;
    gap: 0.5rem;
    justify-content: flex-end;
}

/* Members Section */
.members-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.members-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.members-header h3 {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 600;
}

.members-table-container {
    overflow-x: auto;
}

.members-table {
    width: 100%;
    border-collapse: collapse;
    text-align: left;
}

.members-table th {
    background-color: var(--light);
    padding: 0.75rem 1rem;
    font-weight: 600;
    color: var(--text-primary);
    border-bottom: 1px solid var(--border-color);
}

.members-table td {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--border-color);
}

.members-table tr:last-child td {
    border-bottom: none;
}

.role-badge {
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 500;
    display: inline-block;
    background-color: var(--light);
    color: var(--text-secondary);
}

.role-badge-leader {
    background-color: rgba(var(--primary-rgb), 0.15);
    color: var(--primary);
}

.action-buttons {
    display: flex;
    gap: 0.5rem;
}

/* Projects Section */
.projects-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.projects-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 1rem;
}

.projects-header h3 {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 600;
}

.projects-actions {
    display: flex;
    gap: 1rem;
    align-items: center;
}

.search-box {
    position: relative;
}

.search-box input {
    padding: 0.5rem 2.5rem 0.5rem 1rem;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    min-width: 200px;
}

.search-box i {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-secondary);
}

.projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1.5rem;
}

/* Loading State */
.loading-state {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 3rem;
    text-align: center;
    color: var(--text-secondary);
    background: var(--light);
    border-radius: 8px;
    grid-column: 1 / -1;
}

.loading-spinner {
    width: 40px;
    height: 40px;
    border: 3px solid rgba(var(--primary-rgb), 0.2);
    border-left-color: var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 1rem;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Chat Section */
.chat-container {
    display: grid;
    grid-template-columns: 250px 1fr;
    gap: 1rem;
    height: 500px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    overflow: hidden;
    background-color: var(--card-bg);
}

.chat-sidebar {
    border-right: 1px solid var(--border-color);
    padding: 1rem;
    overflow-y: auto;
    background-color: var(--light);
}

.chat-channels h3 {
    margin: 0 0 1rem;
    font-size: 1rem;
    font-weight: 600;
}

.channels-list {
    list-style: none;
    padding: 0;
    margin: 0 0 1rem;
}

.channels-list li {
    padding: 0.5rem 0.75rem;
    border-radius: 6px;
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.channels-list li.active {
    background-color: rgba(var(--primary-rgb), 0.1);
    color: var(--primary);
}

.channels-list li:hover:not(.active) {
    background-color: rgba(0, 0, 0, 0.05);
}

.chat-main {
    display: flex;
    flex-direction: column;
    height: 100%;
}

.chat-header {
    padding: 1rem;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
}

.chat-header h3 {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.chat-messages {
    flex: 1;
    padding: 1rem;
    overflow-y: auto;
}

.chat-message {
    display: flex;
    margin-bottom: 1.5rem;
}

.chat-message .avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 1rem;
    flex-shrink: 0;
}

.message-content {
    flex: 1;
}

.message-header {
    display: flex;
    align-items: baseline;
    margin-bottom: 0.25rem;
}

.message-sender {
    font-weight: 600;
    margin-right: 0.5rem;
}

.message-time {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.message-content p {
    margin: 0;
    line-height: 1.5;
}

.chat-input {
    padding: 1rem;
    border-top: 1px solid var(--border-color);
    display: flex;
    gap: 0.5rem;
}

.chat-input textarea {
    flex: 1;
    padding: 0.75rem;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    resize: none;
    min-height: 44px;
    max-height: 120px;
}

.send-button {
    width: 44px;
    height: 44px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--primary);
    color: white;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s ease;
}

.send-button:hover {
    background-color: var(--primary-dark);
}

/* Resources Section */
.resources-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.resources-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.resources-header h3 {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 600;
}

.resources-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1rem;
}

.resource-card {
    background-color: var(--card-bg);
    border-radius: 12px;
    padding: 1.25rem;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    border: 1px solid var(--border-color);
    display: flex;
    align-items: flex-start;
}

.resource-icon {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    background-color: rgba(var(--primary-rgb), 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 1rem;
    flex-shrink: 0;
}

.resource-icon i {
    color: var(--primary);
    font-size: 20px;
}

.resource-content {
    flex: 1;
}

.resource-content h3 {
    margin: 0 0 0.5rem;
    font-size: 1rem;
    font-weight: 600;
}

.resource-content p {
    margin: 0;
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.resource-actions {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    margin-left: 1rem;
}

/* Schedule Section */
.schedule-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.schedule-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.schedule-header h3 {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 600;
}

.calendar-view {
    background-color: var(--card-bg);
    border-radius: 12px;
    padding: 1.25rem;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    border: 1px solid var(--border-color);
}

.calendar-nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.calendar-nav h3 {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 600;
}

.calendar {
    border: 1px solid var(--border-color);
    border-radius: 8px;
    overflow: hidden;
}

.calendar-header {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    background-color: var(--light);
    border-bottom: 1px solid var(--border-color);
}

.calendar-header div {
    padding: 0.75rem;
    text-align: center;
    font-weight: 600;
    font-size: 0.9rem;
}

.calendar-body {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    grid-auto-rows: minmax(80px, auto);
}

.calendar-body div {
    padding: 0.5rem;
    border-right: 1px solid var(--border-color);
    border-bottom: 1px solid var(--border-color);
    min-height: 80px;
}

.calendar-body div:nth-child(7n) {
    border-right: none;
}

.calendar-body div:nth-last-child(-n+7) {
    border-bottom: none;
}

.meetings-list {
    margin-top: 1.5rem;
}

.meetings-list h4 {
    margin: 0 0 1rem;
    font-size: 1.1rem;
    font-weight: 600;
}

/* Rewards Section */
.rewards-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.rewards-header {
    margin-bottom: 1rem;
}

.rewards-header h3 {
    margin: 0 0 0.5rem;
    font-size: 1.25rem;
    font-weight: 600;
}

.rewards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-bottom: 1.5rem;
}

.reward-card {
    background-color: var(--card-bg);
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    border: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
}

.reward-icon {
    width: 50px;
    height: 50px;
    border-radius: 10px;
    background-color: rgba(var(--primary-rgb), 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1rem;
}

.reward-icon i {
    color: var(--primary);
    font-size: 24px;
}

.reward-content {
    flex: 1;
}

.reward-content h3 {
    margin: 0 0 0.5rem;
    font-size: 1.1rem;
    font-weight: 600;
}

.reward-content p {
    margin: 0 0 1rem;
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.reward-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1rem;
}

.reward-meta span {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.85rem;
    color: var(--text-muted);
}

.rewards-guide {
    background-color: var(--light);
    border-radius: 12px;
    padding: 1.25rem;
}

.rewards-guide h4 {
    margin: 0 0 1rem;
    font-size: 1.1rem;
    font-weight: 600;
}

.rewards-guide ol {
    margin: 0 0 1.5rem;
    padding-left: 1.5rem;
}

.rewards-guide li {
    margin-bottom: 0.5rem;
}

.info-box {
    background-color: rgba(var(--primary-rgb), 0.05);
    border-radius: 8px;
    padding: 1rem;
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
}

.info-box i {
    color: var(--primary);
    font-size: 18px;
    margin-top: 2px;
}

.info-box p {
    margin: 0;
    font-size: 0.9rem;
}

/* Settings Section */
.settings-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.settings-container h3 {
    margin: 0 0 1rem;
    font-size: 1.25rem;
    font-weight: 600;
}

.settings-card {
    background-color: var(--card-bg);
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    border: 1px solid var(--border-color);
}

.settings-section {
    margin-bottom: 2rem;
}

.settings-section:last-child {
    margin-bottom: 0;
}

.settings-section h4 {
    margin: 0 0 1rem;
    font-size: 1.1rem;
    font-weight: 600;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-color);
}

.form-group {
    margin-bottom: 1.25rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
}

.form-input, 
.form-textarea {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    font-size: 0.95rem;
}

.form-textarea {
    min-height: 120px;
    resize: vertical;
}

.danger-zone {
    background-color: rgba(220, 38, 38, 0.05);
    border-radius: 8px;
    padding: 1.25rem;
}

.danger-zone h4 {
    color: var(--danger);
    border-bottom-color: rgba(220, 38, 38, 0.2);
}

.danger-zone p {
    margin: 0 0 1rem;
    font-size: 0.95rem;
}

/* Empty State */
.club-empty-state {
    background-color: var(--card-bg);
    border-radius: 16px;
    padding: 4rem 2rem;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
    text-align: center;
    margin-bottom: 2rem;
}

.empty-icon {
    font-size: 5rem;
    color: var(--text-secondary);
    margin-bottom: 2rem;
    opacity: 0.5;
}

.club-empty-state h2 {
    margin: 0 0 1rem;
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-primary);
}

.club-empty-state p {
    margin: 0 0 2rem;
    color: var(--text-secondary);
    font-size: 1.25rem;
}

.empty-actions {
    display: flex;
    justify-content: center;
    gap: 1rem;
}

/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1000;
    background-color: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
    align-items: center;
    justify-content: center;
    padding: 1rem;
    animation: fadeIn 0.2s ease;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
}

.modal[style*="display: flex"],
.modal.visible {
    display: flex !important;
    opacity: 1 !important;
    visibility: visible !important;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.modal-content {
    background-color: var(--card-bg);
    border-radius: 16px;
    width: 100%;
    max-width: 550px;
    max-height: 85vh;
    overflow-y: auto;
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
    animation: slideUp 0.3s ease;
}

@keyframes slideUp {
    from { transform: translateY(30px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem 2rem;
    border-bottom: 1px solid var(--border-color);
}

.modal-header h2 {
    margin: 0;
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 12px;
}

.close-btn {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--text-secondary);
    padding: 0;
    margin: 0;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: background-color 0.2s ease;
}

.close-btn:hover {
    background-color: var(--light);
    color: var(--text-primary);
}

.modal-body {
    padding: 2rem;
}

.modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
    padding: 1.5rem 2rem;
    border-top: 1px solid var(--border-color);
}

.required {
    color: var(--danger);
    margin-left: 3px;
}

.highlighted-text {
    color: var(--primary);
    font-weight: 600;
}

/* Role Selector */
.role-selector {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-top: 1rem;
}

.role-option {
    cursor: pointer;
}

.role-option input {
    display: none;
}

.role-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 1.5rem;
    border: 2px solid var(--border-color);
    border-radius: 8px;
    transition: all 0.2s ease;
}

.role-option input:checked + .role-card {
    border-color: var(--primary);
    background-color: rgba(var(--primary-rgb), 0.05);
}

.role-card i {
    font-size: 2rem;
    margin-bottom: 0.75rem;
    color: var(--text-secondary);
}

.role-option input:checked + .role-card i {
    color: var(--primary);
}

.role-card span:nth-child(2) {
    font-weight: 600;
    margin-bottom: 0.5rem;
}

.role-description {
    font-size: 0.85rem;
    color: var(--text-secondary);
    text-align: center;
}

/* Toast Container */
#toast-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 9999;
}

/* Form Row */
.form-row {
    display: flex;
    gap: 1rem;
}

.form-group.half {
    flex: 1;
}

/* Code Box */
.code-box {
    background-color: var(--light);
    padding: 0.75rem 1rem;
    border-radius: 8px;
    font-family: monospace;
    font-size: 1.1rem;
    margin-right: 0.5rem;
    display: inline-block;
}

.join-code-display {
    display: flex;
    align-items: center;
    margin: 1rem 0;
}

/* Info Card */
.info-card {
    background-color: var(--light);
    border-radius: 12px;
    padding: 1.5rem;
}

.info-card h3 {
    margin: 0 0 1rem;
    font-size: 1.1rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.info-card p {
    margin: 0 0 1rem;
    font-size: 0.95rem;
}

.info-card small {
    color: var(--text-secondary);
}

/* Responsive Adjustments */
@media (max-width: 1024px) {
    .dashboard-row {
        grid-template-columns: 1fr;
    }
    
    .role-selector {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 768px) {
    .club-sidebar {
        width: 220px;
        transform: translateX(-100%);
    }
    
    .club-content {
        margin-left: 0;
    }
    
    .club-dashboard-container.sidebar-expanded .club-sidebar {
        transform: translateX(0);
    }
    
    .horizontal-navbar {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
    
    .navbar-actions {
        width: 100%;
    }
    
    .chat-container {
        grid-template-columns: 1fr;
    }
    
    .chat-sidebar {
        display: none;
    }
    
    .form-row {
        flex-direction: column;
        gap: 1rem;
    }
}

@media (max-width: 480px) {
    .club-content {
        padding: 1rem;
    }
    
    .empty-actions {
        flex-direction: column;
        gap: 0.75rem;
    }
    
    .dashboard-stats,
    .assignments-header,
    .members-header,
    .projects-header,
    .resources-header,
    .schedule-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
    
    .btn-primary,
    .btn-secondary,
    .btn-danger {
        width: 100%;
    }
    
    .modal-actions {
        flex-direction: column;
    }
}

/* Animation for section transitions */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.section-entrance {
    animation: fadeIn 0.5s ease;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Navigation between tabs
    const navLinks = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('.club-section');

    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();

            // Update active tab
            navLinks.forEach(l => l.classList.remove('active'));
            link.classList.add('active');

            // Show corresponding section
            const sectionId = link.getAttribute('data-section');
            sections.forEach(section => {
                section.classList.remove('active');
                if (section.id === sectionId) {
                    section.classList.add('active');
                    section.classList.add('section-entrance');
                    setTimeout(() => {
                        section.classList.remove('section-entrance');
                    }, 500);
                }
            });

            // Update URL hash for direct linking
            window.location.hash = sectionId;
        });
    });

    // Check URL hash on page load
    const hash = window.location.hash.substring(1);
    if (hash) {
        const activeLink = document.querySelector(`.nav-link[data-section="${hash}"]`);
        if (activeLink) {
            activeLink.click();
        }
    }

    // Sidebar collapse functionality
    const sidebarCollapseBtn = document.getElementById('sidebarCollapseBtn');
    const container = document.querySelector('.club-dashboard-container');

    if (sidebarCollapseBtn) {
        sidebarCollapseBtn.addEventListener('click', () => {
            container.classList.toggle('sidebar-collapsed');
            
            // Update sidebar and content styles based on collapsed state
            const sidebar = document.querySelector('.club-sidebar');
            const content = document.querySelector('.club-content');
            
            if (container.classList.contains('sidebar-collapsed')) {
                sidebar.style.width = '80px';
                content.style.marginLeft = '80px';
                
                // Hide text in sidebar
                document.querySelectorAll('.nav-link span, .profile-info, .logout-link span').forEach(el => {
                    el.style.display = 'none';
                });
                
                // Rotate collapse button
                sidebarCollapseBtn.querySelector('i').style.transform = 'rotate(180deg)';
            } else {
                sidebar.style.width = '260px';
                content.style.marginLeft = '260px';
                
                // Show text in sidebar
                document.querySelectorAll('.nav-link span, .profile-info, .logout-link span').forEach(el => {
                    el.style.display = 'block';
                });
                
                // Reset collapse button
                sidebarCollapseBtn.querySelector('i').style.transform = 'rotate(0)';
            }
        });
    }

    // Toggle featured projects
    const toggleFeaturedBtn = document.getElementById('toggle-featured');
    if (toggleFeaturedBtn) {
        toggleFeaturedBtn.addEventListener('click', () => {
            const isShowingFeatured = toggleFeaturedBtn.innerText.includes('Show Featured Only');
            
            if (isShowingFeatured) {
                toggleFeaturedBtn.innerHTML = '<i class="fas fa-list"></i> Show All Projects';
                // Logic to filter projects would go here
            } else {
                toggleFeaturedBtn.innerHTML = '<i class="fas fa-star"></i> Show Featured Only';
                // Logic to show all projects would go here
            }
        });
    }

    // Calendar functionality
    function generateCalendar() {
        const calendarBody = document.getElementById('calendar-body');
        if (!calendarBody) return;
        
        // Clear existing calendar
        calendarBody.innerHTML = '';
        
        // Get current month and year
        const now = new Date();
        const currentMonth = now.getMonth();
        const currentYear = now.getFullYear();
        
        // Update month display
        const monthDisplay = document.getElementById('currentMonth');
        if (monthDisplay) {
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            monthDisplay.textContent = `${monthNames[currentMonth]} ${currentYear}`;
        }
        
        // Get first day of month and total days
        const firstDay = new Date(currentYear, currentMonth, 1).getDay();
        const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
        
        // Create calendar cells
        let dayCount = 1;
        
        // Create blank cells for days before first of month
        for (let i = 0; i < firstDay; i++) {
            const cell = document.createElement('div');
            cell.classList.add('calendar-day', 'empty-day');
            calendarBody.appendChild(cell);
        }
        
        // Create cells for days in month
        for (let i = 1; i <= daysInMonth; i++) {
            const cell = document.createElement('div');
            cell.classList.add('calendar-day');
            
            // Add day number
            const dayNumber = document.createElement('div');
            dayNumber.classList.add('day-number');
            dayNumber.textContent = i;
            cell.appendChild(dayNumber);
            
            // Highlight current day
            if (i === now.getDate() && currentMonth === now.getMonth() && currentYear === now.getFullYear()) {
                dayNumber.classList.add('current-day');
            }
            
            // Sample event for demonstration
            if (i === 24) {
                const event = document.createElement('div');
                event.classList.add('calendar-event');
                event.textContent = 'Weekly Meeting';
                event.style.backgroundColor = 'rgba(236, 55, 80, 0.1)';
                event.style.color = '#ec3750';
                event.style.padding = '3px 6px';
                event.style.borderRadius = '4px';
                event.style.fontSize = '12px';
                event.style.marginTop = '3px';
                event.style.cursor = 'pointer';
                
                event.addEventListener('click', () => {
                    // Logic to show meeting details
                    alert('Weekly Meeting: 4:00 PM in Room 203');
                });
                
                cell.appendChild(event);
            }
            
            calendarBody.appendChild(cell);
            dayCount++;
        }
        
        // Add navigation events
        const prevMonth = document.getElementById('prevMonth');
        const nextMonth = document.getElementById('nextMonth');
        
        if (prevMonth) {
            prevMonth.addEventListener('click', () => {
                // Logic to show previous month
                alert('Previous month navigation will be implemented');
            });
        }
        
        if (nextMonth) {
            nextMonth.addEventListener('click', () => {
                // Logic to show next month
                alert('Next month navigation will be implemented');
            });
        }
    }
    
    // Generate calendar if we're on the schedule tab
    if (document.getElementById('schedule')) {
        generateCalendar();
    }
    
    // Function to handle tab switching
    window.openTab = function(tabName) {
        const tabLink = document.querySelector(`.nav-link[data-section="${tabName}"]`);
        if (tabLink) {
            tabLink.click();
        }
    };
    
    // Toast notification system
    window.showToast = function(type, message, duration = 4000) {
        const toastContainer = document.getElementById('toast-container');
        if (!toastContainer) return;
        
        const toast = document.createElement('div');
        toast.className = `toast toast-${type}`;
        
        // Select icon based on type
        let icon = '';
        switch (type) {
            case 'success': icon = '<i class="fas fa-check-circle"></i>'; break;
            case 'error': icon = '<i class="fas fa-exclamation-circle"></i>'; break;
            case 'warning': icon = '<i class="fas fa-exclamation-triangle"></i>'; break;
            case 'info': icon = '<i class="fas fa-info-circle"></i>'; break;
        }
        
        toast.innerHTML = `
            <div class="toast-content">
                ${icon}
                <span>${message}</span>
            </div>
            <button class="toast-close" onclick="this.parentElement.remove()">&times;</button>
        `;
        
        toastContainer.appendChild(toast);
        
        // Animate in
        setTimeout(() => {
            toast.style.transform = 'translateX(0)';
            toast.style.opacity = '1';
        }, 10);
        
        // Auto-remove after duration
        setTimeout(() => {
            toast.style.transform = 'translateX(100%)';
            toast.style.opacity = '0';
            setTimeout(() => {
                toast.remove();
            }, 300);
        }, duration);
    };
    
    // Modal functions
    window.openModal = function(modalId) {
        const modal = document.getElementById(modalId);
        if (!modal) return;
        
        modal.style.display = 'flex';
        setTimeout(() => {
            modal.style.opacity = '1';
            modal.style.visibility = 'visible';
        }, 10);
        document.body.style.overflow = 'hidden';
    };
    
    window.closeModal = function(modalId) {
        const modal = document.getElementById(modalId);
        if (!modal) return;
        
        modal.style.opacity = '0';
        modal.style.visibility = 'hidden';
        setTimeout(() => {
            modal.style.display = 'none';
        }, 300);
        document.body.style.overflow = '';
    };
    
    // Create Club Modal functions
    window.openCreateClubModal = function() {
        openModal('createClubModal');
    };
    
    window.closeCreateClubModal = function() {
        closeModal('createClubModal');
        document.getElementById('createClubForm').reset();
    };
    
    // Join Club Modal functions
    window.openJoinClubModal = function() {
        openModal('joinClubModal');
    };
    
    window.closeJoinClubModal = function() {
        closeModal('joinClubModal');
        document.getElementById('joinCode').value = '';
    };
    
    // Edit Club Modal functions
    window.openEditClubModal = function() {
        // Populate form with current club data
        const clubName = document.getElementById('editClubName').value;
        const clubLocation = document.getElementById('editClubLocation').value;
        const clubDescription = document.getElementById('editClubDescription').value;
        
        document.getElementById('modalEditClubName').value = clubName;
        document.getElementById('modalEditClubLocation').value = clubLocation;
        document.getElementById('modalEditClubDescription').value = clubDescription;
        
        openModal('editClubModal');
    };
    
    window.closeEditClubModal = function() {
        closeModal('editClubModal');
    };
    
    window.updateClubFromModal = function() {
        // Transfer values from modal to form
        const modalName = document.getElementById('modalEditClubName').value;
        const modalLocation = document.getElementById('modalEditClubLocation').value;
        const modalDescription = document.getElementById('modalEditClubDescription').value;
        
        document.getElementById('editClubName').value = modalName;
        document.getElementById('editClubLocation').value = modalLocation;
        document.getElementById('editClubDescription').value = modalDescription;
        
        // Call the update function
        updateClub();
        
        // Close modal
        closeEditClubModal();
    };
    
    // Add Member Modal functions
    window.openAddMemberModal = function() {
        openModal('addMemberModal');
    };
    
    window.closeAddMemberModal = function() {
        closeModal('addMemberModal');
    };
    
    // Change Role Modal functions
    window.openChangeRoleModal = function(membershipId, username, currentRole) {
        document.getElementById('membershipIdForRole').value = membershipId;
        document.getElementById('roleUsername').textContent = username;
        
        // Set the current role radio button
        if (currentRole === 'member') {
            document.getElementById('roleMember').checked = true;
        } else if (currentRole === 'co-leader') {
            document.getElementById('roleLeader').checked = true;
        }
        
        openModal('changeRoleModal');
    };
    
    window.closeChangeRoleModal = function() {
        closeModal('changeRoleModal');
    };
    
    // Create Assignment Modal functions
    window.openCreateAssignmentModal = function() {
        openModal('createAssignmentModal');
    };
    
    window.closeCreateAssignmentModal = function() {
        closeModal('createAssignmentModal');
        document.getElementById('createAssignmentForm').reset();
    };
    
    // Add Resource Modal functions
    window.openAddResourceModal = function() {
        openModal('addResourceModal');
    };
    
    window.closeAddResourceModal = function() {
        closeModal('addResourceModal');
        document.getElementById('addResourceForm').reset();
    };
    
    // Create Channel Modal functions
    window.openCreateChannelModal = function() {
        openModal('createChannelModal');
    };
    
    window.closeCreateChannelModal = function() {
        closeModal('createChannelModal');
        document.getElementById('createChannelForm').reset();
    };
    
    // Create Meeting Modal functions
    window.openCreateMeetingModal = function() {
        openModal('createMeetingModal');
    };
    
    window.closeCreateMeetingModal = function() {
        closeModal('createMeetingModal');
        document.getElementById('createMeetingForm').reset();
    };
    
    // Example data functions (placeholders)
    window.createClub = function() {
        const clubName = document.getElementById('clubName').value;
        const clubLocation = document.getElementById('clubLocation').value;
        const clubDescription = document.getElementById('clubDescription').value;
        
        if (!clubName) {
            showToast('error', 'Please enter a club name');
            return;
        }
        
        // Simulate API call
        showToast('info', 'Creating club...');
        
        setTimeout(() => {
            showToast('success', 'Club created successfully!');
            closeCreateClubModal();
            // In a real app, we'd redirect or refresh
            setTimeout(() => {
                window.location.reload();
            }, 1500);
        }, 1500);
    };
    
    window.joinClub = function() {
        const joinCode = document.getElementById('joinCode').value;
        
        if (!joinCode) {
            showToast('error', 'Please enter a join code');
            return;
        }
        
        // Simulate API call
        showToast('info', 'Joining club...');
        
        setTimeout(() => {
            showToast('success', 'Joined club successfully!');
            closeJoinClubModal();
            // In a real app, we'd redirect or refresh
            setTimeout(() => {
                window.location.reload();
            }, 1500);
        }, 1500);
    };
    
    window.updateClub = function() {
        const clubName = document.getElementById('editClubName').value;
        const clubLocation = document.getElementById('editClubLocation').value;
        const clubDescription = document.getElementById('editClubDescription').value;
        
        if (!clubName) {
            showToast('error', 'Please enter a club name');
            return;
        }
        
        // Simulate API call
        showToast('info', 'Updating club...');
        
        setTimeout(() => {
            showToast('success', 'Club updated successfully!');
            // In a real app, we'd update the UI
        }, 1500);
    };
    
    window.generateJoinCode = function() {
        // Simulate API call
        showToast('info', 'Generating join code...');
        
        setTimeout(() => {
            const newCode = 'ABC123';
            const codeDisplay = document.getElementById('join-code-display');
            if (codeDisplay) {
                codeDisplay.textContent = newCode;
            }
            showToast('success', 'New join code generated!');
        }, 1000);
    };
    
    window.copyJoinCode = function() {
        const codeDisplay = document.getElementById('join-code-display');
        if (!codeDisplay) return;
        
        // Create temporary element
        const el = document.createElement('textarea');
        el.value = codeDisplay.textContent;
        document.body.appendChild(el);
        el.select();
        document.execCommand('copy');
        document.body.removeChild(el);
        
        showToast('success', 'Join code copied to clipboard!');
    };
    
    window.changeRole = function() {
        const membershipId = document.getElementById('membershipIdForRole').value;
        const username = document.getElementById('roleUsername').textContent;
        const newRole = document.querySelector('input[name="memberRole"]:checked').value;
        
        // Simulate API call
        showToast('info', `Changing role for ${username}...`);
        
        setTimeout(() => {
            showToast('success', `${username}'s role updated to ${newRole}`);
            closeChangeRoleModal();
            // In a real app, we'd update the UI
        }, 1500);
    };
    
    window.createAssignment = function() {
        const title = document.getElementById('assignmentTitle').value;
        const description = document.getElementById('assignmentDescription').value;
        const dueDate = document.getElementById('assignmentDueDate').value;
        
        if (!title || !description) {
            showToast('error', 'Please fill out all required fields');
            return;
        }
        
        // Simulate API call
        showToast('info', 'Creating assignment...');
        
        setTimeout(() => {
            showToast('success', 'Assignment created successfully!');
            closeCreateAssignmentModal();
            // In a real app, we'd update the UI
        }, 1500);
    };
    
    window.addResource = function() {
        const title = document.getElementById('resourceTitle').value;
        const url = document.getElementById('resourceUrl').value;
        const description = document.getElementById('resourceDescription').value;
        
        if (!title || !url) {
            showToast('error', 'Please fill out all required fields');
            return;
        }
        
        // Simulate API call
        showToast('info', 'Adding resource...');
        
        setTimeout(() => {
            showToast('success', 'Resource added successfully!');
            closeAddResourceModal();
            // In a real app, we'd update the UI
        }, 1500);
    };
    
    window.createChannel = function() {
        const channelName = document.getElementById('channelName').value;
        
        if (!channelName) {
            showToast('error', 'Please enter a channel name');
            return;
        }
        
        // Simulate API call
        showToast('info', 'Creating channel...');
        
        setTimeout(() => {
            showToast('success', 'Channel created successfully!');
            closeCreateChannelModal();
            // In a real app, we'd update the UI
        }, 1500);
    };
    
    window.createMeeting = function() {
        const title = document.getElementById('meetingTitle').value;
        const date = document.getElementById('meetingDate').value;
        const startTime = document.getElementById('startTime').value;
        
        if (!title || !date || !startTime) {
            showToast('error', 'Please fill out all required fields');
            return;
        }
        
        // Simulate API call
        showToast('info', 'Scheduling meeting...');
        
        setTimeout(() => {
            showToast('success', 'Meeting scheduled successfully!');
            closeCreateMeetingModal();
            // In a real app, we'd update the UI and regenerate calendar
        }, 1500);
    };
    
    window.viewClub = function(clubId) {
        // In a real app, we'd navigate to the club page
        window.location.href = `/club-dashboard?club_id=${clubId}`;
    };
    
    window.sendChatMessage = function() {
        const messageInput = document.getElementById('chat-message-input');
        if (!messageInput || !messageInput.value.trim()) return;
        
        const message = messageInput.value.trim();
        messageInput.value = '';
        
        // In a real app, we'd send the message via API
        const chatMessages = document.querySelector('.chat-messages');
        if (!chatMessages) return;
        
        const msgElement = document.createElement('div');
        msgElement.className = 'chat-message';
        msgElement.innerHTML = `
            <img src="/static/images/logo-rounded.png" alt="Profile" class="avatar">
            <div class="message-content">
                <div class="message-header">
                    <span class="message-sender">You</span>
                    <span class="message-time">Just now</span>
                </div>
                <p>${message}</p>
            </div>
        `;
        
        chatMessages.appendChild(msgElement);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    };
    
    // Initialize stats counters
    document.getElementById('projectCount').textContent = Math.floor(Math.random() * 20) + 5;
    document.getElementById('assignmentCount').textContent = Math.floor(Math.random() * 10) + 1;
});
</script>
{% endblock %}
